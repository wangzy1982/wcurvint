# wcurvint: è½»é‡å¼€æºæ›²çº¿æ±‚äº¤ C/C++ åº“

wcurvint æ˜¯ä¸€ä¸ªè½»é‡ã€æ˜“ç”¨çš„å¼€æºæ›²çº¿æ±‚äº¤ C/C++ åº“ï¼Œä¸“æ³¨äºè§£å†³äºŒç»´å¸¸ç”¨æ›²çº¿çš„äº¤ç‚¹è®¡ç®—ç¨³å®šæ€§é—®é¢˜ï¼Œæä¾›ç®€æ´çš„ C è¯­è¨€æ¥å£ï¼Œé€‚åˆä¸ªäººé¡¹ç›®ã€ç§‘ç ”éªŒè¯åŠä¸­å°å‹åº”ç”¨çš„å¿«é€Ÿé›†æˆã€‚

## ğŸ“‹ åŠŸèƒ½ä»‹ç»å’Œç‰¹ç‚¹

### æ ¸å¿ƒåŠŸèƒ½

- æ”¯æŒå¤šç§åŸºç¡€äºŒç»´æ›²çº¿çš„ä¸¤ä¸¤æ±‚äº¤è®¡ç®—ï¼š
  - ç›´çº¿ â†” ç›´çº¿
  - ç›´çº¿ â†” åœ†å¼§
  - ç›´çº¿ â†” è´å¡å°”æ›²çº¿
  - ç›´çº¿ â†” æœ‰ç†è´å¡å°”æ›²çº¿
  - åœ†å¼§ â†” åœ†å¼§
  - åœ†å¼§ â†” è´å¡å°”æ›²çº¿
  - åœ†å¼§ â†” æœ‰ç†è´å¡å°”æ›²çº¿
  - è´å¡å°”æ›²çº¿ â†” è´å¡å°”æ›²çº¿
  - è´å¡å°”æ›²çº¿ â†” æœ‰ç†è´å¡å°”æ›²çº¿
  - æœ‰ç†è´å¡å°”æ›²çº¿ â†” æœ‰ç†è´å¡å°”æ›²çº¿
- ä¸°å¯Œçš„æ±‚äº¤ç»“æœä¿¡æ¯ï¼š
  - ç»“æœæ•°é‡
  - æ›²çº¿æ˜¯å¦å¥‡å¼‚ï¼ˆåŒ…å«å¯¼æ•°ä¸º0å‘é‡çš„ç‚¹ï¼‰
  - äº¤ç‚¹å’Œé‡åˆæ®µ
  - äº¤ç‚¹æ˜¯äº¤å‰ç‚¹è¿˜æ˜¯é‡‡æ ·ç‚¹ï¼ˆä¾›ä¸Šå±‚åº”ç”¨é€‰æ‹©ä¸åŒç­–ç•¥ï¼‰

### æ ¸å¿ƒç‰¹ç‚¹
- å¼ºå¤§çš„å¥å£®æ€§
  - åŸºç¡€åŒºé—´è¿­ä»£é˜²æ­¢ä¸¢è§£
  - åŒºé—´ä»£æ•°å¤šé¡¹å¼æ¶ˆå…ƒé˜²æ­¢æ–¹ç¨‹ç»„åŒ–ç®€å¯¼è‡´ç²¾åº¦å«ä¹‰å˜åŒ–
  - ç«¯ç‚¹å¤„ç‰¹æ®Šå¤„ç†ï¼Œä¿è¯æ‹“æ‰‘ç¨³å®š
  - æ±‚äº¤ç»“æœä¼˜åŒ–ï¼Œæ±‚äº¤ç»“æœæ›´ç¬¦åˆé¢„æœŸ
- æœ€åŸºç¡€çš„ C è¯­è¨€æ¥å£ï¼Œæ–¹ä¾¿ C/C++ã€Pythonã€C# ç­‰å…¶ä»–è¯­è¨€è°ƒç”¨

## ğŸ’¡ ä¸“ä¸šç‰ˆä»‹ç»

è¯¥å¼€æºç‰ˆæœ¬èƒ½å¤Ÿæ»¡è¶³ä¸€èˆ¬çš„æ›²çº¿æ±‚äº¤éœ€æ±‚ã€‚
å¦‚æœæœ‰æ›´é«˜çš„æ•ˆç‡è¦æ±‚æˆ–è·¨å¹³å°éœ€æ±‚ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸“ä¸šç‰ˆçš„æ›²çº¿æ±‚äº¤åº“ã€‚
- æ•ˆç‡æ–¹é¢ï¼š<b>ä¸“ä¸šç‰ˆçš„æ•ˆç‡æ˜¯å¼€æºç‰ˆçš„5å€</b>ã€‚
- è·¨å¹³å°æ–¹é¢ï¼šå¼€æºç‰ˆåªæ”¯æŒWindowså¹³å°ï¼Œ<b>ä¸“ä¸šç‰ˆæä¾›æ›´å¤šçš„å¹³å°æ”¯æŒ</b>ã€‚

<b>ä¸“ä¸šç‰ˆæ›´å¤šä¿¡æ¯ï¼Œè¯·å’¨è¯¢é‚®ç®±ï¼š1179422870@qq.com</b>

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. ç›®å‰è¯¥é¡¹ç›®åªæ”¯æŒWindowså¹³å°ï¼Œå¦‚æœéœ€è¦å…¶ä»–å¹³å°æ”¯æŒï¼Œè¯·å‚è€ƒåé¢ä¸“ä¸šç‰ˆè¯´æ˜ã€‚
2. ä¸‹è½½æœ¬ä»“åº“æºç 
3. è¿è¡Œ build.sh ç¼–è¯‘
4. åŒ…å«å¤´æ–‡ä»¶ wcurvint.h åˆ°ä½ çš„é¡¹ç›®ä¸­
5. é“¾æ¥ç”Ÿæˆçš„ wcurvint.libï¼Œè¿è¡Œæ—¶å°† wcurvint.dll å’Œ wsolver.dll æ”¾ç½®åœ¨å¯æ‰§è¡Œæ–‡ä»¶åŒçº§ç›®å½•

### ä»£ç ç¤ºä¾‹

<b>ç›´çº¿ä¸åœ†å¼§æ±‚äº¤</b>
```cpp
void test_line_line() {
    // åˆ›å»ºç›´çº¿
    void* curve0 = new_line2d();
    set_line2d_start_point(curve0, 0, 0);
    set_line2d_end_point(curve0, 100, 100);
    //åˆ›å»ºåœ†å¼§
    void* curve1 = new_arc2d();
    set_arc2d_center(curve1, 50, 50);
    set_arc2d_radius(curve1, 10);
    set_arc2d_start_angle(curve1, 0);
    set_arc2d_delta_angle(curve1, 6.28);
    //æ±‚äº¤
    void* intersections = new_curve_curve_intersections(curve0, curve1, 1E-6);
    //æ‰“å°æ±‚äº¤ç»“æœ
    int count = get_curve_curve_intersection_count(intersections);
    std::cout << "Intersection count: " << count << std::endl;
    for (int i = 0; i < count; ++i) {
        bool is_overlap;
        double start_t0;
        double start_t1;
        bool is_start_sample;
        double end_t0;
        double end_t1;
        bool is_end_sample;
        get_curve_curve_intersection(intersections, i, is_overlap,
            start_t0, start_t1, is_start_sample, end_t0, end_t1, is_end_sample);
        std::cout << "Intersection" << i << ": ";
        if (is_overlap) {
            std::cout << "[" << start_t0 << ", " << end_t0 << "]" << "[" << start_t1 << ", " << end_t1 << "]" << std::endl;
        }
        else {
            std::cout << "[" << start_t0 << "]" << "[" << start_t1 << "]" << std::endl;
        }
    }
    //é‡Šæ”¾æ•°æ®
    free(intersections);
    free_curve2d(curve0);
    free_curve2d(curve1);
}
```

<b>è´å¡å°”æ›²çº¿ä¸è´å¡å°”æ›²çº¿æ±‚äº¤</b>
```cpp
void test_bezier_bezier() {
    //åˆ›å»ºè´å¡å°”æ›²çº¿
    void* curve0 = new_bezier_curve2d(3);
    set_bezier_curve2d_control_point(curve0, 0, 0, 0);
    set_bezier_curve2d_control_point(curve0, 1, 100, 100);
    set_bezier_curve2d_control_point(curve0, 2, 200, 100);
    set_bezier_curve2d_control_point(curve0, 3, 300, 0);
    //åˆ›å»ºè´å¡å°”æ›²çº¿    
    void* curve1 = new_bezier_curve2d(3);
    set_bezier_curve2d_control_point(curve1, 0, 100, 0);
    set_bezier_curve2d_control_point(curve1, 1, 200, 100);
    set_bezier_curve2d_control_point(curve1, 2, 300, 100);
    set_bezier_curve2d_control_point(curve1, 3, 400, 0);
    //æ±‚äº¤
    void* intersections = new_curve_curve_intersections(curve0, curve1, 1E-6);
    //æ‰“å°æ±‚äº¤ç»“æœ
    int count = get_curve_curve_intersection_count(intersections);
    std::cout << "Intersection count: " << count << std::endl;
    for (int i = 0; i < count; ++i) {
        bool is_overlap;
        double start_t0;
        double start_t1;
        bool is_start_sample;
        double end_t0;
        double end_t1;
        bool is_end_sample;
        get_curve_curve_intersection(intersections, i, is_overlap,
            start_t0, start_t1, is_start_sample, end_t0, end_t1, is_end_sample);
        std::cout << "Intersection" << i << ": ";
        if (is_overlap) {
            std::cout << "[" << start_t0 << ", " << end_t0 << "]" << "[" << start_t1 << ", " << end_t1 << "]" << std::endl;
        }
        else {
            std::cout << "[" << start_t0 << "]" << "[" << start_t1 << "]" << std::endl;
        }
    }
    //é‡Šæ”¾æ•°æ®
    free(intersections);
    free_curve2d(curve0);
    free_curve2d(curve1);
}
```

## ğŸ“ è”ç³»æˆ‘ä»¬

- é‚®ç®±ï¼š1179422870@qq.com